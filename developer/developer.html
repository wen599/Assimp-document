<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>The Developer Guide &mdash; Asset-Importer-Lib March 2022 v5.4.3 documentation</title>
      <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script src="../_static/jquery.js?v=5d32c60e"></script>
        <script src="../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
        <script src="../_static/documentation_options.js?v=b4ca3d7b"></script>
        <script src="../_static/doctools.js?v=9bcbadda"></script>
        <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="The API-Documentation" href="../API/API-Documentation.html" />
    <link rel="prev" title="Working with the Asset-Importer-Lib" href="../usage/use_the_lib.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../index.html" class="icon icon-home">
            Asset-Importer-Lib
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">General</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../about/index.html">General</a></li>
<li class="toctree-l1"><a class="reference internal" href="../about/introduction.html">Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="../about/introduction.html#dependencies">Dependencies</a></li>
<li class="toctree-l1"><a class="reference internal" href="../about/installation.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../about/quickstart.html">Data Structures</a></li>
<li class="toctree-l1"><a class="reference internal" href="../about/quickstart.html#extending-the-library">Extending the library</a></li>
<li class="toctree-l1"><a class="reference internal" href="../about/quickstart.html#support-feedback">Support &amp; Feedback</a></li>
<li class="toctree-l1"><a class="reference internal" href="../about/quickstart.html#using-the-pre-built-libraries-with-visual-studio">Using the pre-built libraries with Visual-Studio</a></li>
<li class="toctree-l1"><a class="reference internal" href="../about/quickstart.html#build-on-all-platforms-using-vcpkg">Build on all platforms using vcpkg</a></li>
<li class="toctree-l1"><a class="reference internal" href="../about/quickstart.html#building-the-library-from-scratch">Building the library from scratch</a></li>
<li class="toctree-l1"><a class="reference internal" href="../about/quickstart.html#windows-dll-build">Windows DLL Build</a></li>
<li class="toctree-l1"><a class="reference internal" href="../about/quickstart.html#assimp-static-lib">Assimp static lib</a></li>
<li class="toctree-l1"><a class="reference internal" href="../about/quickstart.html#the-android-build">The Android build</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Using Assimp</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../usage/use_the_lib.html">Working with the Asset-Importer-Lib</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Developer Guide</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="current reference internal" href="#">The Developer Guide</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#write-your-own-importer">Write your own importer</a></li>
<li class="toctree-l2"><a class="reference internal" href="#write-your-own-exporter">Write your own exporter</a></li>
<li class="toctree-l2"><a class="reference internal" href="#write-your-own-unit-integration-test">Write your own unit / integration-test</a></li>
<li class="toctree-l2"><a class="reference internal" href="#parser-tools">Parser tools</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#xml-parser">XML-Parser:</a></li>
</ul>
</li>
</ul>
</li>
</ul>
<p class="caption" role="heading"><span class="caption-text">API-Reference</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../API/API-Documentation.html">The API-Documentation</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">Asset-Importer-Lib</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../index.html" class="icon icon-home" aria-label="Home"></a></li>
      <li class="breadcrumb-item active">The Developer Guide</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../_sources/developer/developer.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <img alt="https://www.assimp.org/common/images/splash-color.png" src="https://www.assimp.org/common/images/splash-color.png" />
<section id="the-developer-guide">
<span id="ai-extend"></span><span id="developer-guide"></span><h1>The Developer Guide<a class="headerlink" href="#the-developer-guide" title="Link to this heading"></a></h1>
<section id="write-your-own-importer">
<span id="ai-general"></span><h2>Write your own importer<a class="headerlink" href="#write-your-own-importer" title="Link to this heading"></a></h2>
<p>In this chapter, you will learn how to write your own importers. You just need to implement the #Assimp::BaseImporter class,
which defines a few abstract methods, registers your loader, tests it carefully and provides test models for it.</p>
<ul class="simple">
<li><p>Create a header-file <strong>FormatNameImporter.h</strong> and a cpp-unit ( <strong>FormatNameImporter.cpp</strong> ) in the <strong>&lt;root&gt;/code/AssetLib/</strong> directory</p></li>
<li><p>Add them to the following workspaces: CMAKE (code/CMakeLists.txt, create a new source group for your importer and put them also to ADD_LIBRARY( assimp SHARED))</p></li>
<li><p>Include <em>AssimpPCH.h</em> - this is the PCH file, and it already includes most Assimp-internal stuff.</p></li>
<li><p>Open ImporterRegistry.cpp.cpp and include your header just below the <em>(include_new_importers_here)</em> line, guarded by a #define</p></li>
</ul>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1">#if (!defined assimp_BUILD_NO_FormatName_IMPORTER)</span>
    <span class="o">...</span>
<span class="c1">#endif</span>
</pre></div>
</div>
<p>Wrap the same guard around your .cpp!</p>
<ul class="simple">
<li><p>Now advance to the <strong>(register_new_importers_here)</strong> line in the <strong>ImporterRegistry.cpp</strong> and register your importer there - just like all the others do.</p></li>
<li><p>Set up a suitable test environment (i.e. use AssimpView or your own application), make sure to enable
the #aiProcess_ValidateDataStructure flag, and enable verbose logging. That is, call before you import anything:</p></li>
</ul>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">DefaultLogger</span><span class="p">::</span><span class="n">create</span><span class="p">(</span><span class="s2">&quot;AssimpLog.txt&quot;</span><span class="p">,</span><span class="n">Logger</span><span class="p">::</span><span class="n">VERBOSE</span><span class="p">)</span>
</pre></div>
</div>
<ul class="simple">
<li><p>Implement the <strong>Assimp::BaseImporter::CanRead()</strong> : here the format detection will be perfoormed. You can detect the format by its extension or by parsing some token of the file content</p></li>
<li><p>Implement <strong>Assimp::BaseImporter::InternReadFile()</strong>: Here you have to parse the file format and convert it into an aiScene-Instance:</p></li>
<li><p>Implement <strong>Assimp::BaseImporter::GetExtensionList()</strong>: here you have to add the provided extensions (for the Wavefront-Files add .obj for instance).</p></li>
<li><p>For error handling, throw a dynamic allocated <strong>ImportErrorException</strong> (see Appendix A) for critical errors, and log errors, warnings, info, and debug info
with <strong>DefaultLogger::get()-&gt;[error, warn, debug, info]</strong>.</p></li>
<li><p>A simple example:</p></li>
</ul>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">class</span><span class="w"> </span><span class="nc">MyyImporter</span> <span class="p">:</span> <span class="n">public</span> <span class="n">BaseImporter</span> <span class="p">{</span>
<span class="n">public</span><span class="p">:</span>
    <span class="n">MyyImporter</span><span class="p">()</span> <span class="p">:</span> <span class="n">BaseImporter</span> <span class="o">=</span> <span class="n">default</span><span class="p">;</span>

    <span class="n">MyyImporter</span><span class="p">()</span> <span class="n">override</span> <span class="o">=</span> <span class="n">default</span><span class="p">;</span>

    <span class="nb">bool</span> <span class="n">CanRead</span><span class="p">(</span><span class="n">const</span> <span class="n">std</span><span class="p">::</span><span class="n">string</span> <span class="o">&amp;</span><span class="n">filename</span><span class="p">,</span> <span class="n">IOSystem</span> <span class="o">*</span><span class="n">pIOHandler</span><span class="p">,</span> <span class="nb">bool</span> <span class="n">checkSig</span><span class="p">)</span> <span class="n">const</span> <span class="n">override</span> <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span><span class="n">checkSig</span><span class="p">)</span> <span class="p">{</span>
            <span class="o">//</span> <span class="n">Check</span> <span class="n">the</span> <span class="n">signature</span> <span class="ow">and</span> <span class="k">return</span> <span class="n">the</span> <span class="n">result</span>
        <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
            <span class="n">const</span> <span class="n">std</span><span class="p">::</span><span class="n">string</span> <span class="n">extension</span> <span class="o">=</span> <span class="n">GetExtension</span><span class="p">(</span><span class="n">filename</span><span class="p">));</span>
            <span class="k">if</span> <span class="p">(</span> <span class="n">extension</span> <span class="o">==</span> <span class="s2">&quot;myExt) {</span>
                <span class="k">return</span> <span class="n">true</span><span class="p">;</span>
            <span class="p">}</span>
        <span class="p">}</span>
        <span class="k">return</span> <span class="n">false</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="n">void</span> <span class="n">InternReadFile</span><span class="p">()</span> <span class="p">{</span>
        <span class="o">//</span> <span class="n">Add</span> <span class="n">your</span> <span class="n">code</span> <span class="n">here</span>
    <span class="p">}</span>
<span class="p">};</span>
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">*</span> <span class="n">Make</span> <span class="n">sure</span> <span class="n">that</span> <span class="n">your</span> <span class="n">loader</span> <span class="n">compiles</span> <span class="n">against</span> <span class="nb">all</span> <span class="n">build</span> <span class="n">configurations</span> <span class="n">on</span> <span class="nb">all</span> <span class="n">supported</span> <span class="n">platforms</span><span class="o">.</span> <span class="n">You</span> <span class="n">can</span> <span class="n">use</span> <span class="n">our</span> <span class="n">CI</span><span class="o">-</span><span class="n">build</span> <span class="n">to</span> <span class="n">check</span> <span class="n">several</span> <span class="n">platforms</span>
</pre></div>
</div>
<blockquote>
<div><p>like Windows and Linux (32-bit and 64-bit).</p>
</div></blockquote>
<ul class="simple">
<li><p>Provide some _free_ test models in &lt;root&gt;/test/models/&lt;FormatName&gt; and credit their authors.
Test files for a file format shouldn’t be too large (<em>~500 KiB in total</em>), and not too repetitive. Try to cover all format features with test data.</p></li>
<li><p>Done! Please, share your loader so that everyone can profit from it!</p></li>
</ul>
</section>
<section id="write-your-own-exporter">
<h2>Write your own exporter<a class="headerlink" href="#write-your-own-exporter" title="Link to this heading"></a></h2>
<p>ToDo!</p>
</section>
<section id="write-your-own-unit-integration-test">
<h2>Write your own unit / integration-test<a class="headerlink" href="#write-your-own-unit-integration-test" title="Link to this heading"></a></h2>
<p>After the importer and the exporter is ready you need to test them. The common way of doing this will be explained in this chapter. Assimp does provide
some useful test utilities for importer and exporter testing.</p>
<p>Start writing test code for your importer and exporter by creating a test class at <strong>test/unit/ImportExport/&lt;YourImporterName&gt;</strong>.
Check the following example to get a better understanding of how your test class shall look like:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1">#include &quot;AbstractImportExportBase.h&quot;</span>
<span class="c1">#include &quot;UnitTestPCH.h&quot;</span>
<span class="o">//</span> <span class="n">Add</span> <span class="n">more</span> <span class="n">depending</span> <span class="n">includes</span> <span class="n">based</span> <span class="n">on</span> <span class="n">your</span> <span class="n">test</span>

<span class="k">class</span><span class="w"> </span><span class="nc">utMyImporter</span> <span class="p">:</span> <span class="n">public</span> <span class="n">AbstractImportExportBase</span> <span class="p">{</span>
<span class="n">public</span><span class="p">:</span>
    <span class="nb">bool</span> <span class="n">importerTest</span><span class="p">()</span> <span class="n">override</span> <span class="p">{</span>
        <span class="n">Assimp</span><span class="p">::</span><span class="n">Importer</span> <span class="n">importer</span><span class="p">;</span>
        <span class="n">const</span> <span class="n">aiScene</span> <span class="o">*</span><span class="n">scene</span> <span class="o">=</span> <span class="n">importer</span><span class="o">.</span><span class="n">ReadFile</span><span class="p">(</span><span class="n">ASSIMP_TEST_MODELS_DIR</span> <span class="s2">&quot;/MyFormat/Wuson.myformat&quot;</span><span class="p">,</span> <span class="n">aiProcess_ValidateDataStructure</span><span class="p">);</span>
        <span class="k">return</span> <span class="n">nullptr</span> <span class="o">!=</span> <span class="n">scene</span><span class="p">;</span>
    <span class="p">}</span>
<span class="p">};</span>

<span class="n">TEST_F</span><span class="p">(</span><span class="n">utMyImporter</span><span class="p">,</span> <span class="n">importTest</span><span class="p">)</span> <span class="p">{</span>
    <span class="n">EXPECT_TRUE</span><span class="p">(</span><span class="n">importerTest</span><span class="p">());</span>
<span class="p">}</span>
</pre></div>
</div>
<p>Add this to the <strong>CMakeLists.txt</strong> at <strong>test/unit/CMakeLists.txt</strong> and run the build. Add your basic test file at <strong>test/models/MyFormat</strong>.
Now you can run the test:
* Navigate into the binary folder
* Execute the application <strong>unit</strong> or <strong>unit.exe</strong> on Windows-Platforms.
* Check your result and fix it until all tests are green again.</p>
<p>These tests will run for each PR as a test. The CI will also check your code for leaks or undefined behaviors.</p>
</section>
<section id="parser-tools">
<h2>Parser tools<a class="headerlink" href="#parser-tools" title="Link to this heading"></a></h2>
<section id="xml-parser">
<h3>XML-Parser:<a class="headerlink" href="#xml-parser" title="Link to this heading"></a></h3>
<p>To use the XML-Parser you need to follow these steps:
- Include the header XmlParser.h
- Create an XML-Parser instance
- Load the data from an input stream into the parser
- Perform the parsing
- When this was successful, iterate over the XML-Nodes:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1">#include &lt;assimp/XmlParser.h&gt;</span>

<span class="n">void</span> <span class="n">parse_and_validate_xml</span><span class="p">(</span><span class="n">Stream</span> <span class="o">*</span><span class="n">mySteam</span><span class="p">)</span> <span class="p">{</span>
  <span class="o">//</span> <span class="n">Read</span> <span class="n">the</span> <span class="n">data</span> <span class="ow">and</span> <span class="n">parse</span> <span class="n">the</span> <span class="n">XML</span><span class="o">-</span><span class="n">File</span>
  <span class="n">XMLParser</span> <span class="n">xmlParser</span><span class="p">;</span>
  <span class="k">if</span> <span class="p">(</span><span class="n">xmlParser</span><span class="o">.</span><span class="n">parse</span><span class="p">(</span><span class="n">stream</span><span class="p">))</span> <span class="p">{</span>
     <span class="o">//</span> <span class="n">Get</span> <span class="n">the</span> <span class="n">root</span> <span class="n">node</span>
     <span class="n">XmlNode</span> <span class="n">node</span> <span class="o">=</span> <span class="n">xmlParser</span><span class="o">.</span><span class="n">getRootNode</span><span class="p">();</span>

     <span class="o">//</span> <span class="n">Find</span> <span class="n">one</span> <span class="n">special</span> <span class="n">child</span> <span class="n">node</span>
     <span class="n">XmlNode</span> <span class="n">colladaNode</span> <span class="o">=</span> <span class="n">node</span><span class="o">.</span><span class="n">child</span><span class="p">(</span><span class="s2">&quot;COLLADA&quot;</span><span class="p">);</span>

     <span class="o">//</span> <span class="n">Iterate</span> <span class="n">over</span> <span class="nb">all</span> <span class="n">children</span>
     <span class="k">for</span> <span class="p">(</span> <span class="n">auto</span> <span class="n">child</span> <span class="p">:</span> <span class="n">colladaNode</span><span class="o">.</span><span class="n">children</span><span class="p">())</span> <span class="p">{</span>
     <span class="p">}</span>
  <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<p>You can also iterate over all children nodes via an Iterator interface:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">XmlNodeIterator</span> <span class="n">xmlIt</span><span class="p">(</span><span class="n">node</span><span class="p">,</span> <span class="n">XmlNodeIterator</span><span class="p">::</span><span class="n">PreOrderMode</span><span class="p">);</span>
<span class="n">XmlNode</span> <span class="n">currentNode</span><span class="p">;</span>
<span class="k">while</span> <span class="p">(</span><span class="n">xmlIt</span><span class="o">.</span><span class="n">getNext</span><span class="p">(</span><span class="n">currentNode</span><span class="p">))</span> <span class="p">{</span>
  <span class="o">//</span> <span class="nb">all</span> <span class="n">nodes</span> <span class="n">will</span> <span class="n">be</span> <span class="n">iterated</span> <span class="n">level</span> <span class="n">wise</span>
<span class="p">}</span>
</pre></div>
</div>
</section>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="../usage/use_the_lib.html" class="btn btn-neutral float-left" title="Working with the Asset-Importer-Lib" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="../API/API-Documentation.html" class="btn btn-neutral float-right" title="The API-Documentation" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2020-2025, Kim Kulling.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>